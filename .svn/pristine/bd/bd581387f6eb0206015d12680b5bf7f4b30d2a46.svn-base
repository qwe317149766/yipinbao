<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../lib/vant/vant.css">
    <link rel="stylesheet" type="text/css" href="../lib/iconfont/iconfont.css" />
    <link rel="stylesheet" href="../lib/animate.css">
    <link rel="stylesheet" type="text/css" href="../css/common.css" />
    <style>
        .semicircle_bg {/*背景*/
            background-repeat: no-repeat;
            background-size: 100% 80%;
            background-image: url(../image/frame0_bg2.png);
            background-position: 0 180px;
        }
        .fenlei .van-swipe__indicator{/*导航分类*/
            width: 30px;
            height: 5px;
            border-radius: 0;
            border: 1px solid lightgray;
        }
        .fenlei .van-swipe__indicators{
            height: 5px;
            top: 0;
        }
        .itemss {/*倒计时*/
            width: 2rem;
            height: 2rem;
            background-color: #F3CB7B;
        }
        .brbtomtime::after{/*限时爆款选中*/
            content: '';
            width: 30px;
            height: 3px;
            background: black;
            position: absolute;
            margin: auto;
            bottom: -5px;
            left: 0;
            right: 0;
        }
        .bkzq .van-swipe__indicator{/*爆款专区*/
            opacity: 1;
            border: 1px solid lightgray;
            background: white;
        }
        .bkzq .van-swipe__indicator--active{
            border: 0;
        }
    </style>
</head>
<body>
<div id="frame0" v-cloak class="semicircle_bg flex_col_start flex_items_stretch VH100"  :style="{'background-color':bgyanse}">
    <div class="header PLR_4 W_100 flex_shrink_0">
        <div class="flex_row_between PT_2">
            <i class="iconfont iconsao color_fff fontS_20" @click="fnScanner"></i>
            <div class="flex_center color_999 bg_fff B_radius_15 PTB_2 W_80" @click="toPage('search','./frame0/search.html')">
                <i class="iconfont iconsearch"></i>
                <span class="fontS_12">搜索商品名或粘贴宝贝标题</span>
            </div>
            <i class="iconfont iconxinxi1 color_fff fontS_20" @click="toPage('news','./frame0/news.html')"></i>
        </div>

        <div class="flex W_100">
            <div ref="navEl" class="cate_scroll fontS_14 flex_rowL color_fff PTB_5">
                <div class="PLR_4 relative" v-for="(item,idx) in navArr" :class="nav_ac==idx?'color_FFC41C':''" @click="nav_ac=idx">{{item.cate_name}}</div>
            </div>
        </div>
    </div>


    <div class="overflow_y flex_grow_1 W_100 H_100">
        <van-pull-refresh v-model="downLoading" @refresh="getlists">
            <!--综合-->
            <div class="W_100" v-show="nav_ac==0">
                <!-- 轮播 -->
                <van-swipe @change="fnIndicators" :autoplay="3000" indicator-color="white" class="VH_45 W_95 MLR_auto B_radius_5" :show-indicators="true">
                    <van-swipe-item v-for="(item,idx) in bannerArr" :key="idx">
                        <img :src="item.src" alt="" class="W_100 H_100" @click="gourl(item.jump)">
                    </van-swipe-item>
                </van-swipe>

                <!--分类-->
                <van-swipe @change="fnfenlei" :loop="false" indicator-color="#FFC41C" class="W_100 MT_5 VH_50 MLR_auto fenlei bg_fff" :show-indicators="true">
                    <van-swipe-item>
                        <div class="W_100 flex_row_left flex_wrap bg_fff">
                            <div class="textC W_20 MT_6 fontS_11 z_index_900" v-for="list in tktype" @click="goto(list)">
                                <img :src="list.logoimg" alt="" class="W_65">
                                <p>{{list.title}}</p>
                            </div>
                        </div>
                    </van-swipe-item>
                    <van-swipe-item>
                        <div class="W_100 H_85 MT_5">
                            <img :src="qitadata.daohang" alt="" class="W_100 H_100">
                        </div>
                    </van-swipe-item>
                </van-swipe>


                <!--通知公告-->
                <div class="flex_row_left bg_eee PLR_4 PTB_2">
                    <div class="VH_5 flex_row_left MR_3">
                        <img src="../image/gg1.png" alt="" class="VW_10">
                    </div>
                    <van-swipe :autoplay="3000" :show-indicators="false" :touchable="false" vertical class="W_80 VH_5">
                        <van-swipe-item v-for="(item,index) in notice" :key="index">
                            <div class="PL_1 text_overflow_1 W_100 VH_5">{{item.title}}</div>
                        </van-swipe-item>
                    </van-swipe>
                </div>

                <!--轮播图首页1-->
                <div class="W_100 animated fadeIn bg_fff" v-show="lunboidx==0">
                    <!-- 邀请好友商学院 -->
                    <div class="flex_row_between W_100 PTB_5">
                        <div class="flex_grow_1 PLR_5 BR_1_eeeeee W_50" @click="toPage('invited_share','./frame0/invited_share.html')">
                            <div class="flex_rowL">
                                <img src="../image/u_cart.png" style="width: 22px;height:22px;" alt="">
                                <h4 class="fontS_16 PL_1">邀请好友</h4>
                            </div>
                            <div class="flex_row_between">
                                <div>
                                    <div class="fontS_11 PB_6">独乐乐不如众乐乐</div>
                                    <span class="B_radius_10 bg_linearLR_ED80FE_BF54FF fontS_11 PTB_1 PL_3 PR_2 color_fff">
                                    点击进入<i class="iconfont iconfanhui1 fontS_10"></i>
                                </span>
                                </div>
                                <img :src="qitadata.invite" class="flex_shrink_0 VW_15 VH_15 object_fit_cover" alt="">
                            </div>
                        </div>
                        <div class="flex_grow_1 PLR_5 W_50" @click="toPage('commercia_college','./frame0/commercia_college.html')">
                            <div class="flex_rowL">
                                <img src="../image/u_shop.png" style="width: 22px;height:22px;" alt="">
                                <h4 class="fontS_16 PL_1">商学院</h4>
                            </div>
                            <div class="flex_row_between">
                                <div>
                                    <div class="fontS_11 PB_6">新手必看</div>
                                    <span class="B_radius_10 bg_linearLR_AA9FFF_6773FF fontS_11 PTB_1 PL_3 PR_2 color_fff">
                                        点击进入<i class="iconfont iconfanhui1 fontS_10"></i></span>
                                </div>
                                <img :src="qitadata.store" class="flex_shrink_0 VW_15 VH_15" alt="">
                            </div>
                        </div>
                    </div>

                    <!--加盟-->
                    <img :src="qitadata.join" class="flex_shrink_0 W_100" alt="">


                    <!--时间倒计时-->
                    <div class="P_4 W_100">
                        <div class="W_100 VH_15 flex_row_between PLR_5" style="background-image: url('../image/timebg.png');background-size: 100% 100%">
                            <img src="../image/xsbk.png" alt="" class="VW_20">
                            <div class="flex_row_right">
                                <div class="color_fff PR_5 font_weight_bold">距离结束还剩</div>
                                <van-count-down v-if="timevalue" :time="timevalue" @finish="gettimelist" class="flex_rowC fontS_14 color_fff">
                                    <template v-slot="timeData">
                                        <span class="itemss flex_rowC">{{timeData.hours}}</span>
                                        <span class="PLR_2">:</span>
                                        <span class="itemss flex_rowC">{{timeData.minutes}}</span>
                                        <span class="PLR_2">:</span>
                                        <span class="itemss flex_rowC">{{timeData.seconds}}</span>
                                    </template>
                                </van-count-down>
                            </div>
                        </div>

                        <div class="flex W_100 MTB_3">
                            <div ref="navEltime" class="cate_scroll fontS_10 flex_rowL PB_2 W_100">
                                <div class="PLR_5 relative textC" v-for="(item,idx) in timeArr" :class="timeactive==idx?'brbtomtime':'color_999'" @click="clicktime(idx,'a')">
                                    <p class="fontS_14 font_weight_800" :class="timeactive==idx?'fontS_18':''">{{item.time_mess}}</p>
                                    <p class="fontS_14">{{item.time_type}}</p>
                                </div>
                            </div>
                        </div>

                        <!--商品列表-->
                        <div class="flex_row_between PTB_4 flex_shrink_0" v-for="item in timegoosArry" @click="toPage('goods_detail','./frame0/goods_detail.html',{'itemId':item.itemid,'type':item.type})">
                            <img :src="item.img" alt="" class="VW_30 VH_30 B_radius_5 flex_shrink_0">
                            <div class="VH_30 flex_col_around W_100 PL_5">
                                <div class="text_overflow_2 W_100">{{item.title}}</div>
                                <div class="flex_row_left W_100 fontS_10">
                                    <div class="B_1_eeeeee color_red PLR_2 PTB_1 B_radius_5 MR_2">分享赚：￥{{item.tkmoney1}}</div>
                                    <div class="B_1_eeeeee color_red PLR_2 PTB_1 B_radius_5">自购赚：￥{{item.tkmoney}}</div>
                                </div>
                                <div class="flex_row_between W_100">
                                    <div>
                                        <span class="font_weight_bold fontS_15">￥{{item.spe_price}}</span>
                                        <span class="text_decoration_line-through color_999 fontS_11">{{item.price}}</span>
                                    </div>
                                    <div style="width: 45px;height: 18px;background: url('../image/quanjian1.png')no-repeat;background-size: 100% 100%;" class="color_FFC41C flex_rowC fontS_10">{{item.amount}}元券</div>
                                </div>
                                <div class="color_999 W_100 fontS_10">{{item.sales}}人已买
                                    <span class="PL_1" v-if="item.goods_type=='tmall'">天猫</span>
                                    <span class="PL_1" v-if="item.goods_type=='taobao'">淘宝</span>
                                    <span class="PL_1" v-if="item.goods_type=='pdd'">拼多多</span>
                                    <span class="PL_1" v-if="item.goods_type=='jd'">京东</span>
                                </div>

                            </div>
                        </div>
                    </div>


                    <!--京东商品图-->
                    <div class="PLR_4">
                        <img :src="qitadata.jd" alt="" class="B_radius_5 W_100">
                        <div class="MT_2">
                            <div class="cate_scroll fontS_10" style="overflow-y: hidden">
                                <div class="VW_30 VH_45 MR_3 D_inline_block" v-for="item in jdgoosArry" @click="toPage('goods_detail','./frame0/goods_detail.html',{'itemId':item.itemid,'type':item.type})">
                                    <img :src="item.img" alt="" class="W_100 VH_30 B_radius_5 flex_shrink_0">
                                    <p class="text_overflow_1 fontS_11 MT_1">{{item.title}}</p>
                                    <div class="flex_row_between MT_2">
                                        <div style="width: 45px;height: 18px;background: url('../image/quanjian1.png')no-repeat;background-size: 100% 100%;" class="color_FFC41C flex_rowC fontS_10">{{item.amount}}元券</div>
                                        <div class="font_weight_bold">￥{{item.spe_price}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--为你推荐-->
                    <div class="P_4 W_100">
                        <div class="W_100 flex_rowC">
                            <img src="../image/love.png" class="W_50 MLR_auto" alt="">
                        </div>

                        <!--商品列表-->
                        <van-list
                                v-model="upLoading"
                                :finished="finished"
                                finished-text="没有更多了"
                                @load="getlisttuijian"
                                :immediate-check="false">
                            <div class="flex_row_between PTB_4" v-for="item in goodsListtj1" @click="toPage('goods_detail','./frame0/goods_detail.html',{'itemId':item.itemid,'type':item.type})">
                                <img :src="item.img" alt="" class="VW_30 VH_30 B_radius_5 flex_shrink_0">
                                <div class="VH_30 flex_col_around W_100 PL_5">
                                    <div class="text_overflow_2 W_100">{{item.title}}</div>
                                    <div class="flex_row_left W_100 fontS_10">
                                        <div class="B_1_eeeeee color_red PLR_2 PTB_1 B_radius_5 MR_2">分享赚：￥{{item.tkmoney1}}</div>
                                        <div class="B_1_eeeeee color_red PLR_2 PTB_1 B_radius_5">自购赚：￥{{item.tkmoney}}</div>
                                    </div>
                                    <div class="flex_row_between W_100">
                                        <div>
                                            <span class="font_weight_bold fontS_15">￥{{item.spe_price}}</span>
                                            <span class="text_decoration_line-through color_999 fontS_11">{{item.price}}</span>
                                        </div>
                                        <div style="width: 45px;height: 18px;background: url('../image/quanjian1.png')no-repeat;background-size: 100% 100%;" class="color_FFC41C flex_rowC fontS_10">{{item.amount}}元券</div>
                                    </div>
                                    <div class="color_999 W_100 fontS_10">{{item.sales}}人已买
                                        <span class="PL_1" v-if="item.goods_type=='tmall'">天猫</span>
                                        <span class="PL_1" v-if="item.goods_type=='taobao'">淘宝</span>
                                        <span class="PL_1" v-if="item.goods_type=='pdd'">拼多多</span>
                                        <span class="PL_1" v-if="item.goods_type=='jd'">京东</span>
                                    </div>
                                </div>
                            </div>
                        </van-list>
                    </div>
                </div>

                <!--轮播图首页2-->
                <div class="W_100 animated fadeIn bg_fff" v-show="lunboidx==1">
                    <!--视频专区-->
                    <div class="P_4">
                        <div class="flex_row_left">
                            <img src="../image/jssp.png" alt="" class="VH_5 VW_5">
                            <div class="fontS_14 PL_3">视频专区</div>
                        </div>

                        <div class="MT_5">
                            <div class="cate_scroll fontS_10">
                                <div class="VW_35 VH_50 D_inline_block MR_3 relative" @click="toPage('video_detail','./frame0/video_detail.html',{'data':item})" v-for="item in videolist">
                                    <img :src="item.img" alt="" class="W_100 H_100 B_radius_10 object_fit_cover">
                                    <p class="color_fff absoluteBLR text_overflow_1 P_4 fontS_14">{{item.title}}</p>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!--爆款专区-->
                    <div class="W_100">
                        <div class="flex_row_left PLR_4">
                            <img src="../image/bkzq.png" alt="" class="VH_5 VW_5">
                            <div class="fontS_14 PL_3">爆款专区</div>
                        </div>

                        <!-- 爆款商品 -->
                        <van-swipe :autoplay="3000" v-if="lunboidx==1" indicator-color="gray" class="W_100 VH_40 bkzq" :show-indicators="true">
                            <van-swipe-item class="PLR_4 W_100 H_100" v-for="(item,idx) in bkzqlist" :key="idx" @click="toPage('goods_detail','./frame0/goods_detail.html',{'itemId':item.itemid,'type':item.type})">
                                <div class="flex_row_between PTB_4">
                                    <img :src="item.img" alt="" class="VW_30 VH_30 B_radius_5 D_block">
                                    <div class="VH_30 flex_col_around W_100 PL_5">
                                        <div class="text_overflow_2 W_100">{{item.title}}</div>
                                        <div class="flex_row_left W_100 fontS_10">
                                            <div class="B_1_eeeeee color_red PLR_2 PTB_1 B_radius_5 MR_2">分享赚：￥{{item.tkmoney1}}</div>
                                            <div class="B_1_eeeeee color_red PLR_2 PTB_1 B_radius_5">自购赚：￥{{item.tkmoney}}</div>
                                        </div>
                                        <div class="flex_row_between W_100">
                                            <div>
                                                <span class="font_weight_bold fontS_15">￥{{item.spe_price}}</span>
                                                <span class="text_decoration_line-through color_999 fontS_11">{{item.price}}</span>
                                            </div>
                                            <div style="width: 45px;height: 18px;background: url('../image/quanjian1.png')no-repeat;background-size: 100% 100%;" class="color_FFC41C flex_rowC fontS_10">{{item.amount}}元券</div>
                                        </div>
                                        <div class="color_999 W_100 fontS_10">{{item.sales}}人已买
                                            <span class="PL_1" v-if="item.goods_type=='tmall'">天猫</span>
                                            <span class="PL_1" v-if="item.goods_type=='taobao'">淘宝</span>
                                            <span class="PL_1" v-if="item.goods_type=='pdd'">拼多多</span>
                                            <span class="PL_1" v-if="item.goods_type=='jd'">京东</span>
                                        </div>
                                    </div>
                                </div>
                            </van-swipe-item>
                        </van-swipe>
                    </div>

                    <!--自营商品-->
                    <div class="W_100 MT_3">
                        <img :src="qitadata.zy" alt="" class="W_100">

                        <!--商品列表-->
                        <div class="flex_row_left flex_wrap PLR_3 bg_eee PB_4">
                            <div class="W_50 PT_4" v-for="(item,index) in zyshoplist" :class="index%2==0?'PR_2':'PL_2'" @click="toPage('online_goods_info','./frame1/online_goods_info.html',{'id':item.id})">
                                <img :src="item.img" alt="" class="W_100 VH_45 B_radiusT_5 flex_shrink_0 zwshangpin">
                                <div class="bg_fff P_3 B_radiusB_5" style="margin-top: -3px">
                                    <div class="text_overflow_1">{{item.goods_name}}</div>
                                    <div class="flex_row_left PT_2 W_100">
                                        <div class="color_red fontS_13 font_weight_bold">￥{{item.spe_price}}</div>
                                        <div class="color_999 fontS_10 PL_3">已售：{{item.sales}}</div>
                                    </div>

                                    <img src="../image/zypic.png" alt="" class="W_100">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--为你推荐-->
                    <div class="P_4 W_100">
                        <div class="W_100 flex_rowC">
                            <img src="../image/wntj.png" class="W_60 MLR_auto" alt="">
                        </div>

                        <!--商品列表-->
                        <van-list
                                v-model="upLoading"
                                :finished="finished"
                                finished-text="没有更多了"
                                @load="getlisttuijian2"
                                :immediate-check="false">
                            <div class="flex_row_between PTB_4" v-for="item in goodsListtj2" @click="toPage('goods_detail','./frame0/goods_detail.html',{'itemId':item.itemid,'type':item.type})">
                                <img :src="item.img" alt="" class="VW_30 VH_30 B_radius_5 flex_shrink_0">
                                <div class="VH_30 flex_col_around W_100 PL_5">
                                    <div class="text_overflow_2 W_100">{{item.title}}</div>
                                    <div class="flex_row_left W_100 fontS_10">
                                        <div class="B_1_eeeeee color_red PLR_2 PTB_1 B_radius_5 MR_2">分享赚：￥{{item.tkmoney1}}</div>
                                        <div class="B_1_eeeeee color_red PLR_2 PTB_1 B_radius_5">自购赚：￥{{item.tkmoney}}</div>
                                    </div>
                                    <div class="flex_row_between W_100">
                                        <div>
                                            <span class="font_weight_bold fontS_15">￥{{item.spe_price}}</span>
                                            <span class="text_decoration_line-through color_999 fontS_11">{{item.price}}</span>
                                        </div>
                                        <div style="width: 45px;height: 18px;background: url('../image/quanjian1.png')no-repeat;background-size: 100% 100%;" class="color_FFC41C flex_rowC fontS_10">{{item.amount}}元券</div>
                                    </div>
                                    <div class="color_999 W_100 fontS_10">{{item.sales}}人已买
                                        <span class="PL_1" v-if="item.goods_type=='tmall'">天猫</span>
                                        <span class="PL_1" v-if="item.goods_type=='taobao'">淘宝</span>
                                        <span class="PL_1" v-if="item.goods_type=='pdd'">拼多多</span>
                                        <span class="PL_1" v-if="item.goods_type=='jd'">京东</span>
                                    </div>
                                </div>
                            </div>
                        </van-list>
                    </div>
                </div>
            </div>


            <!--其他分类-->
            <div class="W_100 bg_fff animated fadeIn" v-show="nav_ac!=0">
                <!--筛选条件-->
                <div class="W_100 flex_row_around PTB_5 fontS_12 BB_1_eeeeee bg_fff">
                    <div class="flex_center" :class="sort==0?'color_FFC41C':'color_666'" @click="settj(0)">
                        <span>综合</span>
                    </div>
                    <div class="flex_center" :class="(sort==1||sort==2)?'color_FFC41C':'color_666'" @click="settj(1)">
                        <span>价格</span>
                        <div class="flex_col_c" style="padding-top: 1px">
                            <i class="iconfont iconshang fontS_8" :class="sort==2?'color_FFC41C':'color_666'" style="margin-bottom: -3px"></i>
                            <i class="iconfont iconxia1 fontS_8" :class="sort==1?'color_FFC41C':'color_666'"></i>
                        </div>
                    </div>
                    <div class="flex_center" :class="(sort==3||sort==4)?'color_FFC41C':'color_666'" @click="settj(2)">
                        <span>佣金</span>
                        <div class="flex_col_c" style="padding-top: 1px">
                            <i class="iconfont iconshang fontS_8" :class="sort==4?'color_FFC41C':'color_666'" style="margin-bottom: -3px"></i>
                            <i class="iconfont iconxia1 fontS_8" :class="sort==3?'color_FFC41C':'color_666'"></i>
                        </div>
                    </div>
                    <div class="flex_center" :class="(sort==5||sort==6)?'color_FFC41C':'color_666'" @click="settj(3)">
                        <span>销量</span>
                        <div class="flex_col_c" style="padding-top: 1px">
                            <i class="iconfont iconshang fontS_8" :class="sort==6?'color_FFC41C':'color_666'" style="margin-bottom: -3px"></i>
                            <i class="iconfont iconxia1 fontS_8" :class="sort==5?'color_FFC41C':'color_666'"></i>
                        </div>
                    </div>

                </div>

                <!--商品列表-->
                <van-list
                        v-model="upLoading"
                        :finished="finished"
                        finished-text="没有更多了"
                        @load="getlistfeilei"
                        :immediate-check="false">
                    <div class="flex_row_left flex_wrap PLR_3 bg_eee PB_4">
                        <div @click="toPage('goods_detail','./frame0/goods_detail.html',{'itemId':item.itemid,'type':item.type})" class="W_50 PT_4" v-for="(item,index) in goodsListfl" :class="index%2==0?'PR_2':'PL_2'">
                            <img :src="item.img" alt="" class="W_100 VH_45 B_radiusT_5">
                            <div class="bg_fff P_3 B_radiusB_5" style="margin-top: -3px">
                                <div class="text_overflow_1 PB_2">{{item.title}}</div>
                                <div class="flex_row_between W_100">
                                    <div class="fontS_10">
                                        <span class="color_red fontS_14">￥{{item.spe_price}}</span>
                                        <span class="text_decoration_line-through color_999">{{item.price}}</span>
                                        <span class="color_red">赚{{item.tkmoney}}</span>
                                    </div>
                                    <img v-if="item.goods_type=='tmall'" src="../image/tm_icon.png" alt="" style="width: 16px;height: 16px;">
                                    <img v-if="item.goods_type=='taobao'" src="../image/tb.png" alt="" style="width: 16px;height: 16px;">
                                    <img v-if="item.goods_type=='pdd'" src="../image/copy_pdd.png" alt="" style="width: 16px;height: 16px;">
                                    <img v-if="item.goods_type=='jd'" src="../image/copy_jd.png" alt="" style="width: 16px;height: 15px;">
                                </div>

                                <div class="flex_row_between PT_2 W_100">
                                    <div style="width: 45px;height: 18px;background: url('../image/quanjian1.png')no-repeat;background-size: 100% 100%;" class="color_FFC41C flex_rowC fontS_10">{{item.amount}}元券</div>
                                    <div class="color_999 fontS_11">已售：{{item.sales}}</div>
                                </div>
                            </div>
                        </div>

                    </div>
                </van-list>
            </div>

        </van-pull-refresh>
    </div>
</div>
</body>
</html>
<script src="../script/api.js"></script>
<!--<script src="../lib/fastclick.min.js"></script>-->
<script src="../script/const.js"></script>
<script src="../lib/vue/vue.js"></script>
<script src="../lib/swiper/swiper.min.js"></script>
<script src="../lib/vant/vant.min.js"></script>
<script src="../lib/Tween.min.js"></script>
<script src="../script/rsa.js"></script>
<script src="../script/aes.js"></script>
<script src="../script/common.js"></script>
<script>
    apiready = function() {
        window.vm = new Vue({
            el: '#frame0',
            data: {
                nav_ac:0,
                navArr:[],//顶部导航
                tktype:[
                    {'title':'淘宝','logoimg':'../image/0-1.png','name':'taokeList','url':'./frame0/taokeList.html'},
                    {'title':'京东','logoimg':'../image/0-2.png','name':'taokeList','url':'./frame0/taokeList.html'},
                    {'title':'拼多多','logoimg':'../image/0-3.png','name':'taokeList','url':'./frame0/taokeList.html'},
                    {'title':'9.9包邮','logoimg':'../image/0-4.png','name':'taokeList','url':'./frame0/taokeList.html'},
                    {'title':'店掌柜','logoimg':'../image/0-5.png','name':'more_user_shops','url':'./frame0/more_user_shops.html'},
                    {'title':'天猫','logoimg':'../image/0-6.png','name':'taokeList','url':'./frame0/taokeList.html'},
                    {'title':'信用卡','logoimg':'../image/0-7.png'},
                    {'title':'好货专场','logoimg':'../image/0-8.png','name':'good_choice','url':'./frame0/good_choice.html'},
                    {'title':'共享影视','logoimg':'../image/0-9.png','name':'share_movie','url':'./frame0/share_movie.html'},
                    {'title':'推广商户','logoimg':'../image/0-10.png','name':'offline_store','url':'./frame1/offline_store.html'}
                ],//首页淘客类型

                bannerArr:[],//首页轮播图
                bgyanse:'#f00',//背景颜色
                notice:[],//公告
                lunboidx:0,//分类轮播下标
                qitadata:{},//其他图片
                timeactive:0,//时间下标
                timeArr:[],//时间
                timevalue:'',//时间倒计时
                timegoosArry:[],//抢购商品
                jdgoosArry:[],//京东推荐商品
                goodsListtj1:[],//首页推荐1
                goodsListfl:[],//导航分类商品
                cate_id:0,//分类id
                sort:0,//搜索条件
                videolist:[],//视频列表
                bkzqlist:[],//爆款专区
                zyshoplist:[],//自营商品
                goodsListtj2:[],//首页第二页推荐商品
                page:1,

                downLoading:false,
                upLoading:false,
                finished:false,
            },

            created:function(){
                var that = this;
                that.getgg();
                that.getfenlei();
                that.getqita();
                that.getjd_list();
                that.getlisttuijian();
                that.getvideolist();
                that.getbkzq();
                that.getzyshop();
                that.getlisttuijian2();
            },

            mounted:function(){
                var that = this;
                that.getlunbo();
                that.gettimelist();
            },


            watch: {
                nav_ac:function (value) {
                    var that = this;
                    // console.log(that.nav_ac)
                    $api.dom('.overflow_y').scrollTop = 0; //回到顶部
                    // that.finished = false;
                    var el = that.$refs.navEl;
                    var start = el.scrollLeft;
                    var end = el.children[that.nav_ac].offsetLeft + el.children[0].offsetWidth/2 - el.offsetWidth/2 ; //横向滚动条点击元素居中
                    that.fnAnimate(el,start,end,TWEEN.Easing.Quadratic.Out);
                    // console.log(value)
                    if(value==0){
                        that.sort = 0;
                    }else {
                        that.cate_id = that.navArr[value].cate_id;
                        that.getlistfeilei();
                    }
                },
            },

            methods: {
                //动画
                fnAnimate:function (el,start,end,easing,attr) {
                    var that = this;
                    var position = { x: start }; // position 对应初始位置 也就是left 是0px
                    var tweenA = new TWEEN.Tween(position)// new TWEEN.Tween里面放置初始位置，也就是left 是0px
                        .to({ x: end }, 300) // to函数第一个参数里面放置要到哪里 也就是left:500px的地方 to函数第二个参数是要花多少时间，也就是1000毫秒
                        .easing(easing) //贝塞尔曲线公式
                        .onUpdate(function(){ // onUpdate函数放置这段时间我们做什么，也就是div的left值不断变化，
                            el[attr?attr:'scrollLeft'] = position.x; // position.x就是上面说的不断变化的left值，
                        });
                    tweenA.start(); // 启动这个动画
                    function animate(){
                        requestAnimationFrame(animate); // requestAnimationFrame可以看成setTimeout(animate, 17)
                        TWEEN.update(); // 每隔一段时间，update方法会调用上面的onUpdate函数 位置变化
                    }
                    animate();
                },

                //点击时间
                clicktime:function(idx,load){
                    var that = this;
                    that.timeactive = idx;
                    // console.log(that.$refs.navEltime);
                    var el = that.$refs.navEltime;
                    var start = el.scrollLeft;
                    var end = el.children[that.timeactive].offsetLeft + el.children[0].offsetWidth/2 - el.offsetWidth/2 ;                               //横向滚动条点击元素居中
                    that.fnAnimate(el,start,end,TWEEN.Easing.Quadratic.Out);
                    that.gettimeshop(that.timeArr[that.timeactive].time_id,load);
                },

                //轮播指示器索引
                fnIndicators:function(idx) {
                    var that = this;
                    that.bgyanse = that.bannerArr[idx].color;
                },
                //分类指示器
                fnfenlei:function(idx){
                    var that = this;
                    // $api.dom('.overflow_y').scrollTop = 0; //回到顶部
                    that.downLoading = false;
                    that.upLoading = false;
                    that.finished = false;
                    that.lunboidx = idx;
                    // console.log(that.lunboidx)
                    if(that.lunboidx==1){
                        that.getlisttuijian2();
                    }
                },


                //获取轮播图
                getlunbo:function(){
                    var that = this;
                    that.http(taokeGet_lb_img, 'post', {}, function (res) {
                        console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            that.bannerArr = res.data.banner;
                            that.bgyanse = that.bannerArr[0].color;
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },

                //轮播图跳转
                gourl:function(url){
                    if(!url){
                        return false;
                    }
                    var browser = api.require('webBrowser');
                    browser.open({
                        url: url
                    });
                },

                //首页公告
                getgg:function(){
                    var that = this;
                    that.http(articleArticle_list, 'post', {}, function (res) {
                        // console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            that.notice = res.data.list;
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },

                //首页分类
                getfenlei:function(){
                    var that = this;
                    that.http(taokeGet_taoke_goods_cate, 'post', {'type':1}, function (res) {
                        // console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            that.navArr = res.data.list;
                            that.navArr.unshift({"cate_id":0, "cate_name":"综合"});
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },

                //首页其他图片
                getqita:function(){
                    var that = this;
                    that.http(taokeHomeImg, 'post', {}, function (res) {
                        // console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            that.qitadata = res.data;
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },

                //限时抢购时间列表返回
                gettimelist:function(){
                    var that = this;
                    that.http(taokeBuyLimitTimes, 'post', {}, function (res) {
                        // console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            that.timeArr = res.data;
                            for (var i=0; i<res.data.length; i++) {
                                if(res.data[i].time_type=='疯抢中'){
                                    that.timeactive = i;
                                    break;
                                }
                            }
                            if(res.data[that.timeactive+1]){
                                that.timevalue = (Number(res.data[that.timeactive+1].timestamp)) - Number(new Date().getTime());
                            }
                            setTimeout(function () {
                                that.clicktime(that.timeactive);
                            },1000)
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },

                //限时抢购商品列表
                gettimeshop:function(id,load){
                    var that = this;
                    if(load){
                        that.$toast.loading({
                            mask: true,
                            loadingType:'spinner',
                            message: '请耐心等待...',
                            duration:10000
                        });
                    }
                    that.http(taokeBuyLimitGoods, 'post', {'time_id':id}, function (res) {
                        // console.log(JSON.stringify(res));
                        that.$toast.clear();
                        if (res.code == 0) {
                            that.timegoosArry = res.data;
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },

                //淘客分类跳转
                goto:function(list){
                    var that = this;
                    if(list.title=='信用卡'){
                        var browser = api.require('webBrowser');
                        browser.open({
                            url: that.qitadata.xyk
                        });
                    }else {
                        that.toPage(list.name,list.url,{'type':list.title})
                    }
                },

                //京东推荐商品列表
                getjd_list:function(){
                    var that = this;
                    that.http(taokeGet_goods_list, 'post', {'type':9}, function (res) {
                        // console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            that.jdgoosArry = res.data.list;
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },

                //推荐商品列表
                getlisttuijian:function () {
                    var that = this;
                    if(that.upLoading) { //上拉加载
                        that.page ++;
                    } else{
                        // document.getElementById("setdiv").scrollIntoView();//切换条件时 返回头部
                        that.page = 1; //刷新
                        if(that.goodsListtj1.length>10){
                            that.finished = false;
                        }
                    }
                    // console.log(that.page);
                    that.http(taokeTecommand_goods_list, 'post', {'page':that.page}, function (res) {
                        that.$toast.clear();
                        // console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            if(res.data.list.length < 10) {
                                that.finished = true;
                            }else {
                                that.finished = false;
                            }
                            if(that.upLoading) {
                                that.goodsListtj1 = that.goodsListtj1.concat(res.data.list);
                                that.upLoading = false;
                            }else {
                                that.goodsListtj1 = res.data.list;
                                that.downLoading = false;
                            }
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },

                //导航分类商品列表
                getlistfeilei:function () {
                    var that = this;
                    if(that.upLoading) { //上拉加载
                        that.page ++;
                    } else{
                        // document.getElementById("setdiv").scrollIntoView();//切换条件时 返回头部
                        that.page = 1; //刷新
                        if(that.goodsListfl.length>10){
                            that.finished = false;
                        }
                        that.$toast.loading({
                            mask: true,
                            loadingType:'spinner',
                            message: '加载中...'
                        });
                    }
                    // console.log(that.page);
                    that.http(taokeGet_goods_list, 'post', {'page':that.page,'cate_id':that.cate_id,'keyword':'','type':7,'sort':that.sort}, function (res) {
                        that.$toast.clear();
                        // console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            if(res.data.list.length < 10) {
                                that.finished = true;
                            }else {
                                that.finished = false;
                            }
                            if(that.upLoading) {
                                that.goodsListfl = that.goodsListfl.concat(res.data.list);
                                that.upLoading = false;
                            }else {
                                that.goodsListfl = res.data.list;
                                that.downLoading = false;
                            }
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },

                //搜索条件
                settj:function (index) {
                    var that = this;
                    $api.dom('.overflow_y').scrollTop = 0; //回到顶部
                    if(index==0){//综合
                        that.sort = 0;
                    }else if(index==1){ //高低价格
                        if(that.sort===2){
                            that.sort = 1;
                        }else {
                            that.sort = 2;
                        }
                    }else if(index==2){ //佣金
                        if(that.sort===4){
                            that.sort = 3;
                        }else {
                            that.sort = 4;
                        }
                    }else if(index==3){ //销量
                        if(that.sort===6){
                            that.sort = 5;
                        }else {
                            that.sort = 6;
                        }
                    }
                    // console.log(that.sort)
                    that.getlistfeilei();
                },


                //首页第二页
                //视频列表
                getvideolist:function(){
                    var that = this;
                    that.http(taokeVideo, 'post', {}, function (res) {
                        // console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            that.videolist = res.data;
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },
                //爆款专区
                getbkzq:function(){
                    var that = this;
                    that.http(taokeAppFirstPageMaxSales, 'post', {}, function (res) {
                        // console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            that.bkzqlist = res.data.list;
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },
                //自营商品
                getzyshop:function(){
                    var that = this;
                    that.http(shopZyGoodsList, 'post', {}, function (res) {
                        // console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            that.zyshoplist = res.data;
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },
                //推荐商品列表第二页
                getlisttuijian2:function () {
                    var that = this;
                    if(that.upLoading) { //上拉加载
                        that.page ++;
                    } else{
                        // document.getElementById("setdiv").scrollIntoView();//切换条件时 返回头部
                        that.page = 1; //刷新
                        if(that.goodsListtj2.length>16){
                            that.finished = false;
                        }
                    }
                    // console.log(that.page);
                    that.http(taokeAppFistPageJHS, 'post', {'page':that.page}, function (res) {
                        that.$toast.clear();
                        // console.log(JSON.stringify(res));
                        if (res.code == 0) {
                            if(res.data.length < 16) {
                                that.finished = true;
                            }else {
                                that.finished = false;
                            }
                            if(that.upLoading) {
                                that.goodsListtj2 = that.goodsListtj2.concat(res.data);
                                that.upLoading = false;
                            }else {
                                that.goodsListtj2 = res.data;
                                that.downLoading = false;
                            }
                        }else {
                            that.$toast(res.msg)
                        }
                    })
                },


                //下拉刷新
                getlists:function () {
                    var that = this;
                    if(that.lunboidx==0){
                        if(that.nav_ac==0){
                            console.log('首页推荐1');
                            that.getlunbo();
                            that.getqita();
                            that.gettimelist();
                            that.getlisttuijian();
                        }else {
                            console.log('分类');
                            that.getlistfeilei();
                        }
                    }else {
                        console.log('首页推荐2');
                        that.getqita();
                        that.getvideolist();
                        that.getlisttuijian2();
                    }
                },

                //扫码
                fnScanner:function (){
                    var that = this;
                    var resultList = api.hasPermission({
                        list:['camera']
                    });
                    // console.log(JSON.stringify(resultList[0].granted));
                    // console.log(JSON.stringify(resultList[0].undetermined));
                    if(!resultList[0].granted) {
                        api.requestPermission({
                            list:['camera'],
                            code:1
                        }, function(ret, err){
                            console.log(JSON.stringify(ret));
                        });
                    }
                    var FNScanner = api.require('FNScanner');
                    FNScanner.openScanner({
                        autorotation: true
                    }, function(ret, err) {
                        // console.log(JSON.stringify(ret));
                        if (ret) {
                            console.log(JSON.stringify(ret));
                            if(ret.eventType === "success"){
                                var content = ret.content;
                                var shop_id = content.match(/state=(\S*)#/)[1];
                                if(shop_id) {
                                    that.toPage('offline_store_pay','./frame1/offline_store_pay.html',{'id':shop_id});
                                }else {
                                    that.$toast('请扫描正确的二维码');
                                }
                            }
                        } else {
                            console.log(JSON.stringify(err));
                        }
                    });
                },

            },
        })
    }
</script>
